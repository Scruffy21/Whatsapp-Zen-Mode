!function(){var t,e,n,a;(e=t||(t={})).WWA_EXTENSION_CONNECTOR="0LLQsNGC0YbQsNC/",e.WWA_EXTERNAL_CONNECTOR="0YHQvtGB0Lg=",(a=n||(n={}))[a.findChatByTitle=0]="findChatByTitle",a[a.updateChatModels=1]="updateChatModels",a[a.muteChatLocally=2]="muteChatLocally",a[a.unmuteChatsLocally=3]="unmuteChatsLocally",a[a.archiveChatLocallyByTitle=4]="archiveChatLocallyByTitle",a[a.muteNonMutedChatsExceptChat=5]="muteNonMutedChatsExceptChat",a[a.unarchiveChatLocallyByTitle=6]="unarchiveChatLocallyByTitle",a[a.muteAndArchiveChatLocally=7]="muteAndArchiveChatLocally",a[a.getChatById=8]="getChatById",a[a.openChat=9]="openChat",a[a.refreshWWChats=10]="refreshWWChats";new Uint8Array(16);for(var o=[],i=0;i<256;++i)o.push((i+256).toString(16).substr(1));var r={};const u=function(){return u.mID=Math.random().toString(36).substring(7),u.mObj={},fillModuleArray=function(){webpackChunkbuild.push([[u.mID],{},function(t){Object.keys(t.m).forEach((function(e){u.mObj[e]=t(e)}))}])},fillModuleArray(),get=function(t){return u.mObj[t]},findModule=function(t){return results=[],modules=Object.keys(u.mObj),modules.forEach((function(e){if(mod=u.mObj[e],"undefined"!=typeof mod)if("string"==typeof t){if("object"==typeof mod.default)for(key in mod.default)key==t&&results.push(mod);for(key in mod)key==t&&results.push(mod)}else{if("function"!=typeof t)throw new TypeError("findModule can only find via string and function, "+typeof t+" was passed");t(mod)&&results.push(mod)}})),results},{modules:u.mObj,constructors:u.cArr,findModule:findModule,get:get}};r?r=u:window.mR=u();const s=r;let c=null,l=null;const h=new Map;function d(t){return c.Chat.get(t)}function f(t){return c.Chat.models.find((e=>e.title()===t))}function C(t){const e=c.Chat.get(t);1!=e.mute.isMute&&e.mute.setMute(-1,!1)}function m(t){const e=c.Chat.get(t);0!=e.mute.isMute&&e.mute.setMute(0,!1)}function y(t){!function(t){t&&(h.set(String(t.id),t),1!=t.archive&&(t.archive=!0))}(c.Chat.get(t))}function p(t){!function(t){const e=h.get(t);e&&(0!=e.archive&&(e.archive=!1),h.delete(t))}(t)}function g(t){const e=c.Chat.models.filter((e=>!e.mute.isMute&&e.id!==t));return e.forEach((t=>C(t.id))),e}setInterval((()=>{h.forEach((function(t){!0!==t.archive&&(t.archive=!0)}))}),100);class M{static fromWWAChat(t){return{id:t.id,isGroup:t.isGroup,name:t.name,title:t.title(),hasUnread:t.hasUnread,unreadCount:t.unreadCount}}}const L=chrome,A=new Map;A.set(n.findChatByTitle,(t=>{const e=f(t);return M.fromWWAChat(e)})),A.set(n.updateChatModels,(t=>t.map((t=>{const e=d(t.id);return M.fromWWAChat(e)})))),A.set(n.muteChatLocally,(t=>{C(t.id)})),A.set(n.unmuteChatsLocally,(t=>{for(const e of t)m(e.id)})),A.set(n.muteNonMutedChatsExceptChat,(t=>g(t.id).map(M.fromWWAChat))),A.set(n.archiveChatLocallyByTitle,(t=>{y(f(t).id)})),A.set(n.unarchiveChatLocallyByTitle,(t=>{p(f(t).id)})),A.set(n.getChatById,(t=>{const e=d(t);return M.fromWWAChat(e)})),A.set(n.muteAndArchiveChatLocally,((t,e,n)=>{const a=t.id;e?C(a):m(a),n?y(a):p(a)})),A.set(n.openChat,(t=>{!function(t){const e=c.Chat.get(t);l.openChatAt(e)}(t.id)})),A.set(n.refreshWWChats,(async()=>{await async function(){await c.Chat.sync()}()})),function(){const t=s();c=t.findModule("Chat")[0].default,l=t.findModule("Cmd")[0].default}();const W=L.runtime.connect("dbpmpbfpicojogpodnicpjomaojiiocp",{name:t.WWA_EXTERNAL_CONNECTOR});W.onMessage.addListener((t=>{!async function(t){let e,n;console.log("handleRequest",t);try{if(!A.has(t.call))throw new Error(`Caller ${t.call} not defined`);{const n=A.get(t.call);e=t.args?await n(...t.args):await n()}}catch(e){console.error(e,"request=",t),n=e}W.postMessage(function(t,e,n,a){const o={id:t};return n&&(o.error=n,o.original=a),e&&(o.result=e),o}(t.id,e,n,t))}(t)}))}();